<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>small3d - API Documentation: Choosing and emulating OpenGL versions on Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">small3d - API Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Choosing and emulating OpenGL versions on Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>One matter that required attention during the early days of <a href="https://github.com/dimi309/small3d">small3d</a>'s development was selecting an OpenGL version for the engine and making sure it works.</p>
<p>I decided to program small3d for OpenGL 3.3 and make it fall back to OpenGL 2.1 on systems that do not support the later API. Version 3.3 was widespread among new Windows and OSX systems and was considered to be pretty modern and a good foundation for understanding future versions. small3d is, if nothing else, a learning exercise in any case. I reached the conclusion that v2.1 was the lowest common denominator between older machines, especially those running Linux, since it was supported, by<a href="http://www.mesa3d.org/intro.html">Mesa</a> software emulation at least, on my Debian system. Of course, when querying the supported version like this: </p><pre class="fragment">glxinfo | grep Open
</pre><p>I would get OpenGL v1.4 returned. But when running this: </p><pre class="fragment">LIBGL_ALWAYS_SOFTWARE=1 glxinfo | grep Open
</pre><p>I would indeed receive a result indicating OpenGL 2.1 support. The <em>LIBGL_ALWAYS_SOFTWARE</em> variable makes programs that run with it set to always use software rendering. So executing small3d's sample game like this: </p><pre class="fragment">LIBGL_ALWAYS_SOFTWARE=1 ./samplegame
</pre><p>did indeed allow it to run on OpenGL 2.1 and use the corresponding shaders.</p>
<p>Now that things have evolved, my Debian does support v2.1 without emulation. However, this little trick is still useful. My current Linux box is even older than the one I had back then and, when running the sample game on it, the background looks a little messy. This does not happen on Windows or Apple machines. Still, I thought that perhaps I was not covering some special condition which causes the problem. I was about to spend time trying to solve it. But then I executed the game with the <em>LIBGL_ALWAYS_SOFTWARE</em> variable set, it switched to software emulation, and everything was looking fine. So I reached the conclusion that it is either the hardware driver or my very old GPU that is defective and decided not to worry about it, as far as correcting my code is concerned. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
