<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>small3d - API Documentation: Make sure you are using your NVIDIA chip on Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">small3d - API Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Make sure you are using your NVIDIA chip on Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the early days of <a href="https://github.com/dimi309/small3d">small3d</a>'s development, I was using a laptop which I was dual booting into Windows and Debian. The machine had been purchased with Windows pre-installed, and then I also installed the Linux instance. Even though the Windows system reported support for OpenGL 4.2, my Linux image reported OpenGL 3.0 when running glxinfo: </p><pre class="fragment">glxinfo | grep Open
</pre><p>What was strange was that it mentioned an Intel VGA instead of the NVIDIA GeForce which I knew I had. The little detail that I was missing up to that point was that I had two GPUs.</p>
<p>NVIDIA supports <a href="http://www.nvidia.com/object/optimus_technology.html">Optimus</a> technology. If you have a laptop, it could be the case that you have two GPUs too, basically a GeForce chip and an Intel chip. The latter is less capable graphics-wise but it consumes less energy, so Optimus is supposed to switch between the two, choosing GeForce for the more demanding, graphics-intensive tasks, like games or CAD applications, and Intel for the more mundane ones, like document or spreadsheet editing. In Windows the switch between the two is transparent to the user. However, if you are using Ubuntu for example, you may have to take a few extra steps.</p>
<p>First of all, to check whether or not you have two video adapters, you can run the following: </p><pre class="fragment">lspci -v | grep VGA
</pre><p>If two entries are returned, one from Intel and one from NVIDIA, your machine is probably using Optimus. In my case, this lead to all programs running on the Intel GPU, regardless of whether or not they were a game or a word processor. I also found out that it is not possible (or not a good idea at least) to configure the entire system only use the GeForce chip. There are two packages that allow us to direct a specific executable to the NVIDIA GPU by prefixing it with a certain command. These are <a href="http://bumblebee-project.org/">Bumblebee</a> and Primus. I have tried them both and they work well, but Primus runs on top of Bumblebee and it is recommended by the Bumblebee developers as the way to go (it forms part of the same project). On a Debian distribution for example, you can install them by executing: </p><pre class="fragment">sudo apt-get install bumblebee primus
</pre><p>(Note that there are <a href="http://bumblebee-project.org/install.html">more detailed instructions</a> provided for installation and use, depending on your configuration)</p>
<p>After having done so myself, when I would execute: </p><pre class="fragment">primusrun glxinfo | grep OpenGL
</pre><p>or for plain Bumblebee: </p><pre class="fragment">optirun glxinfo | grep OpenGL
</pre><p>The results indicated, in both cases, that the NVIDIA chip had been activated and that it supported OpenGL 4.2.</p>
<p>So I created a bash command file to run Eclipse (with which I was editing the game engine's code at the time) which contained: </p><pre class="fragment">primusrun [path to my Eclipse]/eclipse
</pre><p>This allowed my whole development environment, including executables being debugged, to run on the NVIDIA GPU. GLEW also reported that OpenGL 3.3 was supported, so I could work with that version of the API. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
