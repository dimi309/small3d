file(GLOB SOURCE_FILES *.cpp)
list(REMOVE_ITEM SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/unit_tests.cpp)

file(GLOB HEADER_FILES ${CMAKE_SOURCE_DIR}/include/small3d/*.hpp)

if(NOT SMALL3D_OPENGL)
  list(APPEND SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/vkzos.c)
  list(APPEND HEADER_FILES ${CMAKE_CURRENT_SOURCE_DIR}/vkzos.h)
else()
  list(REMOVE_ITEM SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/Renderer.cpp)
  list(APPEND SOURCE_FILES ${CMAKE_SOURCE_DIR}/opengl33/src/Renderer.cpp)
  list(REMOVE_ITEM HEADER_FILES  ${CMAKE_SOURCE_DIR}/include/small3d/Renderer.hpp)
  list(APPEND HEADER_FILES ${CMAKE_SOURCE_DIR}/opengl33/include/small3d/Renderer.hpp)
endif()

add_library(small3d ${SOURCE_FILES} ${HEADER_FILES})

if(NOT SMALL3D_OPENGL)
  target_include_directories(small3d PUBLIC ${CONAN_INCLUDE_DIRS} ${CMAKE_SOURCE_DIR}/include/small3d)
else()
  target_include_directories(small3d PUBLIC ${CONAN_INCLUDE_DIRS} ${CMAKE_SOURCE_DIR}/opengl33/include/small3d ${CMAKE_SOURCE_DIR}/include/small3d)
endif()
target_link_libraries(small3d PUBLIC ${CONAN_LIBS})
